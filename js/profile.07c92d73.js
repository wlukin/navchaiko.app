"use strict";(self["webpackChunknavchaiko"]=self["webpackChunknavchaiko"]||[]).push([[845],{7506:function(t,e,i){i.r(e),i.d(e,{default:function(){return P}});var r=i(3396),s=i(7139);const a=t=>((0,r.dD)("data-v-a7886eec"),t=t(),(0,r.Cn)(),t),n={class:"profile-info"},o={class:"profile-rating"},l=a((()=>(0,r._)("div",{class:"profile-star svg-star1"},null,-1))),d={class:"profile-rating extra"},c=a((()=>(0,r._)("div",{class:"profile-star svg-star2"},null,-1))),h={key:0,class:"profile-rating timer"},f=a((()=>(0,r._)("div",{class:"profile-star svg-stopwatch-color"},null,-1)));function u(t,e,i,a,u,v){return(0,r.wg)(),(0,r.iD)(r.HY,null,[u.currentProfile&&!i.gameId?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,s.C_)([`svg-avatar-${this.currentProfile.avatarId}`,"bg-white tile-round"])},null,2)):(0,r.kq)("",!0),u.currentProfile&&i.gameId?((0,r.wg)(),(0,r.iD)("div",{class:"profile-wrapper",onClick:e[1]||(e[1]=t=>this.forceUpdate()),key:u.componentKey},[(0,r._)("div",{class:(0,s.C_)([`svg-avatar-${this.currentProfile.avatarId}`,"bg-white tile-round profile-avatar"])},null,2),(0,r._)("div",n,[(0,r._)("div",o,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.pointsWin%this.pointsExtra,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:(0,s.C_)([`add${t}`,"profile-star svg-star1 add"])},null,2)))),128)),l,(0,r.Uk)(" "+(0,s.zw)(u.profilePoints.win),1)]),(0,r._)("div",d,[c,(0,r._)("div",{ref:"star-extra",onTransitionend:e[0]||(e[0]=t=>t.target.classList.remove("active")),class:"profile-star svg-star2 add-extra"},null,544),(0,r.Uk)(" "+(0,s.zw)(u.profilePoints.extra),1)]),u.profilePoints.timer?((0,r.wg)(),(0,r.iD)("div",h,[f,(0,r.Uk)(" "+(0,s.zw)(u.profilePoints.timer),1)])):(0,r.kq)("",!0)])])):(0,r.kq)("",!0)],64)}var v=i(6732),m={props:["hintFlag","resultFlag","gameId","modeId","timerEnableFlag"],mixins:[v.Z],data(){return{currentProfile:null,profilePoints:{},pointsWin:0,pointsExtra:5,isHintUsed:!1,wrongsNumber:0,componentKey:Date.now()}},beforeMount(){this.currentProfile=this.getProfile(this.getCurrentProfile()),this.profilePoints=this.getProfilePoints(this.currentProfile?.id,this.gameId,this.modeId)||{},this.emitter.on("onTimerFinish",(t=>{this.gameId&&this.currentProfile&&(this.addProfilePoints(this.currentProfile.id,this.gameId,this.modeId,0,0,t.points??0),this.profilePoints=this.getProfilePoints(this.currentProfile.id,this.gameId,this.modeId),this.forceUpdate())}))},methods:{forceUpdate(){this.componentKey=Date.now()}},watch:{timerEnableFlag(t){this.gameId&&this.currentProfile&&t&&(this.pointsWin=0)},hintFlag(t){!0===t&&this.gameId&&this.currentProfile&&(this.isHintUsed=!0,this.pointsWin=0)},resultFlag(t){if(this.gameId&&this.currentProfile)if(!0===t){if(0===this.wrongsNumber&&!this.isHintUsed){this.pointsWin+=1;const t=+(this.pointsWin>0&&this.pointsWin%this.pointsExtra===0);this.addProfilePoints(this.currentProfile.id,this.gameId,this.modeId,1,t),this.profilePoints=this.getProfilePoints(this.currentProfile.id,this.gameId,this.modeId),this.forceUpdate(),t&&this.$refs["star-extra"].classList.add("active")}this.wrongsNumber=0,this.isHintUsed=!1}else!1===t&&(this.pointsWin=0,this.wrongsNumber+=1)}}},p=i(89);const g=(0,p.Z)(m,[["render",u],["__scopeId","data-v-a7886eec"]]);var P=g},3483:function(t,e,i){i.r(e),i.d(e,{default:function(){return U}});var r=i(3396),s=i(7139);const a=t=>((0,r.dD)("data-v-a83fa916"),t=t(),(0,r.Cn)(),t),n={class:"area-main"},o={class:"calendar"},l={class:"points-info"},d={class:"points"},c=a((()=>(0,r._)("div",{class:"star svg-star1"},null,-1))),h={class:"points extra"},f=a((()=>(0,r._)("div",{class:"star svg-star2"},null,-1))),u={class:"date"},v={width:"100%",height:"100%",viewBox:"0 0 800 800",style:{transform:"rotate(-90deg)",position:"absolute"}},m=["stroke-dashoffset"];function p(t,e,i,a,p,g){const P=(0,r.up)("CurrentProfile"),w=(0,r.up)("ControlsPanelBase");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",o,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(p.calendar,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.stamp,class:"day"},[(0,r._)("div",l,[(0,r._)("div",d,[c,(0,r.Uk)((0,s.zw)(t.win),1)]),(0,r._)("div",h,[f,(0,r.Uk)((0,s.zw)(t.extra),1)])]),(0,r._)("div",u,(0,s.zw)(t.date),1)])))),128))]),(0,r.Wm)(w,null,{"controls-first":(0,r.w5)((()=>[(0,r._)("div",{onClick:e[0]||(e[0]=t=>this.buttonBackHandler()),class:"tile-round bg-blue svg-back"}),(0,r.Wm)(P)])),"controls-last":(0,r.w5)((()=>[(0,r._)("div",{class:"bg-blue tile-round svg-recyle-bin",onClick:e[1]||(e[1]=t=>this.removeProfileHandler())},[((0,r.wg)(),(0,r.iD)("svg",v,[(0,r._)("circle",{r:"350",cx:"400",cy:"400",fill:"transparent",stroke:"#ffffff","stroke-linecap2":"round","stroke-width":"100","stroke-dasharray":"2198","stroke-dashoffset":`${Math.floor(-2198*(1-(p.removeIntervalValue-200)/200))}`},null,8,m)]))])])),_:1})])}i(7658);var g=i(662),P=i(7447),w=i(6732),I=i(7506),k=i(8661),_={mixins:[g.Z,w.Z],created(){this.domSetDocumentBackgroundUrl(i(9495))},beforeMount(){this.currentProfile=this.getProfile(this.getCurrentProfile());let t={};const e=(0,k.hm)(),i=this.currentProfile?.points||{},r=[...new Set(Object.keys(i).map((t=>parseInt(t.split("_")[0]))).filter((t=>t<=e)))]||[].slice(-30);Object.keys(i).forEach((e=>{const s=parseInt(e.split("_")[0]);if(r.includes(s)){const r=(0,k.Gd)(s);t[s]={stamp:s,date:`${("0"+r.getUTCDate()).slice(-2)}.${("0"+(1+r.getUTCMonth())).slice(-2)}`,win:(i[e][0]??0)+(t[s]?.win??0),extra:(i[e][1]??0)+(t[s]?.extra??0)}}})),this.calendar=Object.values(t).sort(((t,e)=>t.stamp-e.stamp))},components:{ControlsPanelBase:P["default"],CurrentProfile:I["default"]},data(){return{currentProfile:null,calendar:[],removeInterval:null,removeIntervalValue:200}},beforeUnmount(){this.resetTimer()},methods:{buttonBackHandler(){this.$router.push({name:"home"})},removeProfileHandler(){this.removeInterval?this.resetTimer():this.startTimer()},removeProfile(){this.setCurrentProfile(null),this.deleteProfile(this.currentProfile.id),this.buttonBackHandler()},resetTimer(){this.removeInterval&&(clearInterval(this.removeInterval),this.removeInterval=null,this.removeIntervalValue=200)},startTimer(){this.removeInterval||(this.removeInterval=setInterval(this.tickTimer,50))},tickTimer(){this.removeIntervalValue>0?this.removeIntervalValue-=1:(this.resetTimer(),this.removeProfile())}}},b=i(89);const C=(0,b.Z)(_,[["render",p],["__scopeId","data-v-a83fa916"]]);var U=C}}]);
//# sourceMappingURL=profile.07c92d73.js.map